<!doctype refentry PUBLIC "-//OASIS//DTD DocBook V4.1//EN" [

<!-- Process this file with docbook-to-man to generate an nroff manual
     page: `docbook-to-man manpage.sgml > manpage.1'.  You may view
     the manual page with: `docbook-to-man manpage.sgml | nroff -man |
     less'.  A typical entry in a Makefile or Makefile.am is:

manpage.1: manpage.sgml
  docbook-to-man $< > $@
  -->

<!-- This example was constructed by Colin Watson
     <email>cjwatson@debian.org</email>, based on a man page template
     provided by Tom Christiansen <email>tchrist@jhereg.perl.com</email>
     and a DocBook man page example by Craig Small
     <email>csmall@debian.org</email>.
  -->

  <!-- Fill in the various UPPER CASE things here. -->
  <!ENTITY manfirstname "<firstname>Brodie</firstname>">
  <!ENTITY mansurname   "<surname>Rao</surname>">
  <!-- Please adjust the date whenever revising the manpage. -->
  <!ENTITY mandate      "<date>February 24, 2008</date>">
  <!-- SECTION should be 1-8, maybe with subsection. Other parameters are
       allowed: see man(7), man(1). -->
  <!ENTITY mansection   "<manvolnum>1</manvolnum>">
  <!ENTITY manemail     "<email>me+dnuos@dackz.net</email>">
  <!ENTITY manusername  "Brodie Rao">
  <!ENTITY manucpackage "<refentrytitle>Dnuos</refentrytitle>">
  <!ENTITY manpackage   "dnuos">
]>

<refentry>
  <refentryinfo>
    <address>
      &manemail;
    </address>
    <author>
      &manfirstname;
      &mansurname;
    </author>
    <copyright>
      <year>2008</year>
      <holder>&manusername;</holder>
    </copyright>
    &mandate;
  </refentryinfo>
  <refmeta>
    &manucpackage;

    &mansection;
  </refmeta>
  <refnamediv>
    <refname>&manpackage;</refname>

    <refpurpose>Audio file metadata lister</refpurpose>
  </refnamediv>
  <refsynopsisdiv>
    <cmdsynopsis>
      <command>&manpackage;</command>

      <arg choice="opt">options</arg>
      <arg rep="repeat" choice="req"><replaceable>basedir</replaceable></arg>
    </cmdsynopsis>
  </refsynopsisdiv>
  <refsect1>
    <title>DESCRIPTION</title>

    <para><command>&manucpackage;</command> is a console program that creates
      lists of music collections, based on directory structure.</para>

    <para>For example, a list might look like this:</para>

    <screen>
Album/Artist                       |  Size | Type | Quality
===========================================================
Ambient                            |       |      | 
    Alva Noto                      |       |      | 
        2001 - Transform           | 70.9M | MP3  | -V2
        2004 - Transrapid          | 30.2M | MP3  | -aps
        2005 - Transspray          | 31.7M | MP3  | -aps
        2005 - Transvision         | 32.3M | MP3  | -aps
    Alva Noto and Ryuichi Sakamoto |       |      | 
        2002 - Vrioon              | 72.6M | MP3  | -aps
        2005 - Insen               | 99.1M | MP3  | 320 C
        2006 - Revep               | 27.9M | MP3  | -V2n</screen>

    <para>The list format is completely customizable and can be plain text
      or HTML.</para>

    <para><command>&manucpackage;</command> supports MP3, AAC, Musepack,
      Ogg Vorbis, and FLAC audio files. Quality profile detection is also
      supported, including
      <ulink url="http://wiki.hydrogenaudio.org/index.php?title=Lame#Recommended_encoder_settings">LAME
      quality preset information</ulink>.</para>

    <para>Audio file information is saved to disk after a list is made for
      the first time, making subsequent lists much faster to generate. Only
      audio files and directories that have been changed since the last
      list was made are analyzed.</para>

  </refsect1>
  <refsect1>
    <title>OPTIONS</title>

    <para>Some people make this separate from the description.</para>

    <variablelist>
      <varlistentry>
        <term><option>basedir</option> ...</term>
        <listitem><para>Base directories to search for audio files
          in.</para></listitem>
      </varlistentry>
      <varlistentry>
        <term><option>-h</option></term>
        <listitem><para>Show the help message and exit.</para></listitem>
      </varlistentry>
      <varlistentry>
        <term><option>--help-output-string</option></term>
        <listitem><para>Show the output string help message.</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>Application:</term>
        <listitem>
          <variablelist>
            <varlistentry>
              <term><option>--debug</option></term>
              <listitem><para>Output debug trace to
                <filename>STDERR</filename>.</para></listitem>
            </varlistentry>
            <varlistentry>
              <term><option>--ignore-bad</option></term>
              <listitem><para>Don't list files that cause Audiotype
                failure.</para></listitem>
            </varlistentry>
            <varlistentry>
              <term><option>-q</option></term>
              <term><option>--quiet</option></term>
              <listitem><para>Omit progress indication.</para></listitem>
            </varlistentry>
            <varlistentry>
              <term><option>-V</option></term>
              <term><option>--version</option></term>
              <listitem><para>Display version.</para></listitem>
            </varlistentry>
          </variablelist>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>Directory walking:</term>
        <listitem>
          <variablelist>
            <varlistentry>
              <term><option>--disable-cache</option></term>
              <listitem><para>Disable caching.</para></listitem>
            </varlistentry>
            <varlistentry>
              <term><option>--cache-dir</option>=<replaceable>DIR</replaceable></term>
              <listitem><para>Store cache in <replaceable>DIR</replaceable>
                (default <filename class="directory">~/.dnuos</filename>).</para></listitem>
            </varlistentry>
            <varlistentry>
              <term><option>-e</option> <replaceable>DIR</replaceable></term>
              <term><option>--exclude</option>=<replaceable>DIR</replaceable></term>
              <listitem><para>Exclude <replaceable>DIR</replaceable> from
                search.</para></listitem>
            </varlistentry>
            <varlistentry>
              <term><option>-i</option></term>
              <term><option>--ignore-case</option></term>
              <listitem><para>Case-insensitive directory sorting.</para></listitem>
            </varlistentry>
            <varlistentry>
              <term><option>-L</option></term>
              <term><option>--list-files</option></term>
              <listitem><para>List audio files in directories (doesn't use
                caching).</para></listitem>
            </varlistentry>
            <varlistentry>
              <term><option>-m</option></term>
              <term><option>--merge</option></term>
              <listitem><para>Parse <replaceable>basedirs</replaceable> in
                parallel and merge output.</para></listitem>
            </varlistentry>
            <varlistentry>
              <term><option>-u</option> <replaceable>TYPES</replaceable></term>
              <term><option>--unknown-types</option>=<replaceable>TYPES</replaceable></term>
              <listitem><para>A comma-separated list of unknown audio types
                to list</para></listitem>
            </varlistentry>
            <varlistentry>
              <term><option>-w</option></term>
              <term><option>--wildcards</option></term>
              <listitem><para>Expand wildcards in
                <replaceable>basedirs</replaceable></para></listitem>
            </varlistentry>
          </variablelist>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>Filtering:</term>
        <listitem>
          <variablelist>
            <varlistentry>
              <term><option>-b</option> <replaceable>MIN</replaceable></term>
              <term><option>--bitrate</option>=<replaceable>MIN</replaceable></term>
              <listitem><para>Exclude MP3s with bitrate lower than
                <replaceable>MIN</replaceable> (in Kbps).</para></listitem>
            </varlistentry>
            <varlistentry>
              <term><option>-l</option></term>
              <term><option>--lame-only</option></term>
              <listitem><para>Exclude MP3s with no LAME profile.</para></listitem>
            </varlistentry>
            <varlistentry>
              <term><option>-v</option></term>
              <term><option>--vbr-only</option></term>
              <listitem><para>Exclude MP3s with constant bitrates.</para></listitem>
            </varlistentry>
            <varlistentry>
              <term><option>-M</option></term>
              <term><option>--no-mixed</option></term>
              <listitem><para>Exclude directories with mixed files.</para></listitem>
            </varlistentry>
          </variablelist>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>Parsing:</term>
        <listitem>
          <variablelist>
            <varlistentry>
              <term><option>-P</option> <replaceable>n</replaceable></term>
              <term><option>--prefer-tag</option>=<replaceable>n</replaceable></term>
              <listitem><para>if both ID3v1 and ID3v2 tags exist, prefer
                <replaceable>n</replaceable> (1 or 2) (default 2)</para></listitem>
            </varlistentry>
          </variablelist>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>Output:</term>
        <listitem>
          <variablelist>
            <varlistentry>
              <term><option>-B</option> <replaceable>COLOR</replaceable></term>
              <term><option>--bg</option>=<replaceable>COLOR</replaceable></term>
              <listitem><para>Set HTML background
                <replaceable>COLOR</replaceable> (default white)</para></listitem>
            </varlistentry>
            <varlistentry>
              <term><option>-f</option> <replaceable>FILE</replaceable></term>
              <term><option>--file</option>=<replaceable>FILE</replaceable></term>
              <listitem><para>Write output to <replaceable>FILE</replaceable></para></listitem>
            </varlistentry>
            <varlistentry>
              <term><option>-H</option></term>
              <term><option>--html</option></term>
              <listitem><para>HTML output (deprecated, use
                <option>--template html</option>).</para></listitem>
            </varlistentry>
            <varlistentry>
              <term><option>-I</option> <replaceable>n</replaceable></term>
              <term><option>--indent</option>=<replaceable>n</replaceable></term>
              <listitem><para>Set indent to <replaceable>n</replaceable>
                (default 4)</para></listitem>
            </varlistentry>
            <varlistentry>
              <term><option>-o</option> <replaceable>STRING</replaceable></term>
              <term><option>--output</option>=<replaceable>STRING</replaceable></term>
              <listitem><para>Set output format <replaceable>STRING</replaceable>
                used in plain-text and HTML output. See
                <option>--help-output-string</option> for details on syntax.
                (default <code>[n,-52]| [s,5] | [t,-4] | [q]</code>)</para></listitem>
            </varlistentry>
            <varlistentry>
              <term><option>-O</option> <replaceable>FILE</replaceable></term>
              <term><option>--output-db</option>=<replaceable>FILE</replaceable></term>
              <listitem><para>Write list in output.db format to
                <replaceable>FILE</replaceable> (deprecated, use
                <option>--template db</option>).</para></listitem>
            </varlistentry>
            <varlistentry>
              <term><option>-s</option></term>
              <term><option>--strip</option></term>
              <listitem><para>Strip output of field headers and empty
                directories.</para></listitem>
            </varlistentry>
            <varlistentry>
              <term><option>--template</option>=<replaceable>TEMPLATE</replaceable></term>
              <listitem><para>Set output <replaceable>TEMPLATE</replaceable>
              (default plaintext)</para></listitem>
            </varlistentry>
            <varlistentry>
              <term><option>-T</option> <replaceable>COLOR</replaceable></term>
              <term><option>--text</option>=<replaceable>COLOR</replaceable></term>
              <listitem><para>Set HTML text <replacelable>COLOR</replaceable>
              (default black)</para></listitem>
            </varlistentry>
          </variablelist>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>Statistics:</term>
        <listitem>
          <variablelist>
            <varlistentry>
              <term><option>-D</option></term>
              <term><option>--date</option></term>
              <listitem><para>Display datestamp header.</para></listitem>
            </varlistentry>
            <varlistentry>
              <term><option>-S</option></term>
              <term><option>--stats</option></term>
              <listitem><para>Display statistics results.</para></listitem>
            </varlistentry>
            <varlistentry>
              <term><option>-t</option></term>
              <term><option>--time</option></term>
              <listitem><para>Display elapsed time footer.</para></listitem>
            </varlistentry>
          </variablelist>
        </listitem>
      </varlistentry>
    </variablelist>

    <refsect2>
      <title>OUTPUT STRING FORMAT</title>

      <para>Anything enclosed by brackets is considered a field. A field must
        have the following syntax:</para>

      <itemizedlist mark="none">
        <listitem><para><code>[TAG]</code></para></listitem>
        <listitem><para><code>[TAG,WIDTH]</code></para></listitem>
        <listitem><para><code>[TAG,WIDTH,SUFFIX]</code></para></listitem>
        <listitem><para><code>[TAG,,SUFFIX]</code></para></listitem>
      </itemizedlist>

      <variablelist>
        <title><code>TAG</code> is any of the following characters:</title>
        <varlistentry>
          <term><code>a</code></term>
          <listitem><para>List of bitrates in Audiolist compatible
            format.</para></listitem>
        </varlistentry>
        <varlistentry>
          <term><code>A</code></term>
          <listitem><para>Artist name as found in ID3 tags</para></listitem>
        </varlistentry>
        <varlistentry>
          <term><code>b</code></term>
          <listitem><para>Bitrate with suffix (e.g. 192k)</para></listitem>
        </varlistentry>
        <varlistentry>
          <term><code>B</code></term>
          <listitem><para>Bitrate in bps.</para></listitem>
        </varlistentry>
        <varlistentry>
          <term><code>C</code></term>
          <listitem><para>Album name as found in ID3 tags.</para></listitem>
        </varlistentry>
        <varlistentry>
          <term><code>f</code></term>
          <listitem><para>Number of audio files (including
            spacers).</para></listitem>
        </varlistentry>
        <varlistentry>
          <term><code>l</code></term>
          <listitem><para>Length in minutes and seconds.</para></listitem>
        </varlistentry>
        <varlistentry>
          <term><code>L</code></term>
          <listitem><para>Length in seconds.</para></listitem>
        </varlistentry>
        <varlistentry>
          <term><code>m</code></term>
          <listitem><para>Time of last change.</para></listitem>
        </varlistentry>
        <varlistentry>
          <term><code>M</code></term>
          <listitem><para>Time of last change in seconds since the
            epoch.</para></listitem>
        </varlistentry>
        <varlistentry>
          <term><code>n</code></term>
          <listitem><para>Directory name (indented).</para></listitem>
        </varlistentry>
        <varlistentry>
          <term><code>N</code></term>
          <listitem><para>Directory name.</para></listitem>
        </varlistentry>
        <varlistentry>
          <term><code>p</code></term>
          <listitem><para>Profile.</para></listitem>
        </varlistentry>
        <varlistentry>
          <term><code>P</code></term>
          <listitem><para>Full path.</para></listitem>
        </varlistentry>
        <varlistentry>
          <term><code>q</code></term>
          <listitem><para>Quality.</para></listitem>
        </varlistentry>
        <varlistentry>
          <term><code>s</code></term>
          <listitem><para>Size with suffix (e.g. 65.4M).</para></listitem>
        </varlistentry>
        <varlistentry>
          <term><code>S</code></term>
          <listitem><para>Size in bytes.</para></listitem>
        </varlistentry>
        <varlistentry>
          <term><code>t</code></term>
          <listitem><para>File type.</para></listitem>
        </varlistentry>
        <varlistentry>
          <term><code>T</code></term>
          <listitem>
            <variablelist>
              <title>Bitrate type:</title>
              <varlistentry>
                <term><code>~</code></term>
                <listitem><para>Mixed files.</para></listitem>
              </varlistentry>
              <varlistentry>
                <term><code>C</code></term>
                <listitem><para>Constant bitrate.</para></listitem>
              </varlistentry>
              <varlistentry>
                <term><code>L</code></term>
                <listitem><para>Lossless compression.</para></listitem>
              </varlistentry>
              <varlistentry>
                <term><code>V</code></term>
                <listitem><para>Variable bitrate.</para></listitem>
              </varlistentry>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term><code>V</code></term>
          <listitem><para>Encoder.</para></listitem>
        </varlistentry>
      </variablelist>

      <para><code>WIDTH</code> defines the exact width of the field. The
        output is cropped to this width if needed. Negative values will give
        left aligned output. Cropping is always done on the right.</para>

      <para><code>SUFFIX</code> lets you specify a unit to be concatenated to
        all non-empty data.</para>

      <variablelist>
        <title>Other interpreted sequences are:</title>
          <varlistentry>
            <term><code>\[</code></term>
            <listitem><para><code>[</code></para></listitem>
          </varlistentry>
          <varlistentry>
            <term><code>\]</code></term>
            <listitem><para><code>]</code></para></listitem>
          </varlistentry>
          <varlistentry>
            <term><code>\n</code></term>
            <listitem><para>New line.</para></listitem>
          </varlistentry>
          <varlistentry>
            <term><code>\t</code></term>
            <listitem><para>Tab character.</para></listitem>
          </varlistentry>
      </variablelist>

      <para>Unescaped brackets are forbidden unless they define a
        field.</para>

      <para>Note: If you have any whitespace in your output string you must
        put it inside quotes or otherwise it will not get parsed
        right.</para>

    </refsect2>
  </refsect1>
  <refsect1>
    <title>EXAMPLES</title>
  </refsect1>
  <refsect1>
    <title>FILES</title>

    <para>If the environment's language is not set to English,
      <command>&manucpackage;</command> will try to access its locale
      files, which may be located in the following directory:</para>

    <variablelist>
      <varlistentry>
        <term><filename>/usr/lib/python2.5/site-packages/dnuos/locale/*/LC_MESSAGES/*.mo</filename></term>
        <listitem><para><acronym>GNU</acronym> <command>gettext</command>
          locale files</para></listitem>
      </varlistentry>
    </variablelist>
  </refsect1>
  <refsect1>
    <title>AUTHORS</title>

    <para>Dnuos is developed and maintained by
      <author email="me+dnuos@dackz.net">Brodie Rao</author> and
      <author email="pejve@vasteras2.net">Mattias
      P&auml;iv&auml;rinta</author>.</para>
    <para>Oidua was originally developed by <othercredit>Sylvester
      Johansson</othercredit> and
      <othercredit email="pejve@vasteras2.net">Mattias
      P&auml;iv&auml;rinta</othercredit>.</para>

  </refsect1>
  <refsect1>
    <title>HISTORY</title>

    <para><command>&manucpackage;</command> is based on code from
      <ulink url="http://oidua.suxbad.com/">Oidua</ulink>. Oidua makes
      similar lists, but is much older, has fewer features, and is no longer
      maintained.</para>
  </refsect1>
</refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:2
sgml-indent-data:t
sgml-parent-document:nil
sgml-default-dtd-file:nil
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
